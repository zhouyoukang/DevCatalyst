---
description: 蓝图模式：在执行复杂任务前，先研究→规划→审查→执行。参考 Google Antigravity 的 Plan-Review-Execute 模式。
---

# /blueprint — 蓝图模式工作流

> 适用于：架构设计、大规模重构、新功能开发、技术选型等复杂任务

## 触发条件
- 用户明确使用 `/blueprint` 指令
- AI 判断任务复杂度高（涉及 3+ 文件修改、架构变更、新系统引入）

## 执行流程

### 1. 研究阶段（Research）
- 搜索相关代码和文件，理解现有架构
- 搜索外部最佳实践（search_web）
- 阅读相关文档和依赖
- **产出**：在回复中列出「已了解的上下文」

### 2. 规划阶段（Plan）
- 使用 `todo_list` 创建结构化计划
- 列出将要创建/修改/删除的文件清单
- 说明每个修改的目的和影响范围
- 识别潜在风险和回退方案
- **产出**：结构化实施计划（用户可审查）

### 3. 审查阶段（Review）
- 将计划展示给用户
- 等待用户确认或调整
- 如果用户有修改意见，回到规划阶段
- **关键**：未经用户确认，不得进入执行阶段

### 4. 执行阶段（Execute）
- 按计划逐步实施
- 每完成一个步骤，在 todo_list 中标记完成
- 遇到计划外问题，暂停并通知用户
- **产出**：可运行的代码 + 更新的文档

### 5. 验证阶段（Verify）
- 运行相关测试
- 检查修改是否符合预期
- 确认无副作用
- 将经验写入 Memory（如有通用价值）

## 快速模式（Fast Mode）
对于简单任务（修改 < 3 文件、无架构变更），跳过研究和审查阶段，直接执行。
AI 应在回复开头声明：`[Fast Mode] 任务简单，直接执行。`

## 注意事项
- 蓝图模式不是官僚主义，是防止 AI 幻觉和架构错误的保护机制
- 用户可以随时说「直接做」跳过审查
- 每次蓝图执行后，评估是否有可复用的模式，写入 Memory
